#! /bin/bash

export DESIGN_NAME=$1
export RESULTS_DIR=$DESIGN_NAME.ext

if [[ ! -f $RESULTS_DIR/$DESIGN_NAME.cdl ]] ; then
	echo "Creating $RESULTS_DIR/$DESIGN_NAME.cdl"
	./spi2cdl $RESULTS_DIR/$DESIGN_NAME.gds.spice | \
		gzip -c > $RESULTS_DIR/$DESIGN_NAME.cdl.gz
fi

start_time=$SECONDS
cvc cvc/cvcrc.sky130B

runtime=$(( SECONDS - start_time ))
hours=$((runtime / 3600))
minutes=$(( (runtime % 3600) / 60 ))
seconds=$(( (runtime % 3600) % 60 ))
awk "END {printf \"Runtime: %d:%02d:%02d (hh:mm:ss)\n\", $hours, $minutes, $seconds}" /dev/null >> $DESIGN_NAME.cvc.log
